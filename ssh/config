Host *
    ServerAliveInterval 1200
    ServerAliveCountMax 12
    TCPKeepAlive        yes
    Compression         yes
    IdentitiesOnly      yes
    IdentityAgent       ~/.1password/agent.sock

# Suita
Host gw-suita
    HostName        gw-suita.akashisn.info
    ProxyCommand    cloudflared access ssh --hostname %h
    User            admin
    ForwardAgent    yes
    IdentityFile    ~/.ssh/1password.pub

Host ix2215-suita
    HostName        172.16.0.1
    User            nishi
    HostKeyAlgorithms ssh-rsa
    PubkeyAcceptedAlgorithms +ssh-rsa

Host er-x-suita
    HostName        172.16.0.2
    User            nishi
    IdentityFile    ~/.ssh/1password.pub

Host truenas-suita
    HostName        172.16.0.3
    User            admin
    ForwardAgent    yes
    IdentityFile    ~/.ssh/1password.pub

# Tokyo
Host gw-tokyo
    HostName        gw-tokyo.akashisn.info
    ProxyCommand    cloudflared access ssh --hostname %h
    User            admin
    ForwardAgent    yes
    IdentityFile    ~/.ssh/1password.pub

Host ix2215-tokyo
    HostName        172.16.100.1
    User            nishi
    HostKeyAlgorithms ssh-rsa
    PubkeyAcceptedAlgorithms +ssh-rsa

Host truenas
    HostName        172.16.100.10
    User            admin
    IdentityFile    ~/.ssh/1password.pub

# AWS
Host k3s-lightsail.akashisn.info
    HostName        k3s-lightsail.akashisn.info
    ProxyCommand    cloudflared access ssh --hostname %h
    User            ubuntu
    IdentityFile    ~/.ssh/1password.pub

Host cloudsa
    HostName        i-0125c81b19f9acbac
    User            ec2-user
    ForwardAgent    yes
    IdentityFile    ~/.ssh/1password.pub
    ProxyCommand    ~/.ssh/ssm-proxy.sh %h %p %r cdx-arise-pre-dev

# OCI
Host k3s-oci.akashisn.info
    HostName        k3s-oci.akashisn.info
    ProxyCommand    cloudflared access ssh --hostname %h
    User            ubuntu
    IdentityFile    ~/.ssh/1password.pub

# Service
Host gitlab.com
    HostName        gitlab.com
    IdentityFile    ~/.ssh/1password.pub

Host github.com
    HostName        github.com
    IdentityFile    ~/.ssh/1password.pub

Host gist.github.com
    HostName        github.com
    IdentityFile    ~/.ssh/1password.pub

# Match
Match host 172.16.0.* !Exec "ping -c1 -t1 172.16.0.1"
    ProxyJump gw-suita

Match host 172.16.100.* !Exec "ping -c1 -t1 172.16.100.1"
    ProxyJump gw-tokyo
